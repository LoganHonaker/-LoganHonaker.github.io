YUI.add("search-sidebar-group-search-view",(function(e,t){require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("search-sidebar-group-search-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.searchTerm=t.searchTerm;let s={},r={text:this.searchTerm};this.searchUrl=new e.SearchUrl(r,this.appContext,e.SearchUrl.searchTypes.GROUPS),s.all={id:this.searchUrl.getId()+"-sidebar",apiParams:e.merge(this.searchUrl.getAPIParams(),{perPage:2,page:1,safe_search:1,extras:e.APIHelper.request.getRebootGroupExtras()+",use_vespa,membership_info,icon_urls,pool_recent,sizes,pool_recent,safety_level"})},this.searchParams=s,this.safeSearchPref=1},loadState:function(){let t=this.appContext.getModel("search-groups-models",this.searchParams.all.id,this.searchParams.all.apiParams).then(function(e){e.getValue("groups").totalItems>0?(this.groupRecs=e.getValue("groups").getList(),this.set("groupsResults",this.groupRecs),this.set("noResults",!1)):(this.set("noResults",!0),this.disableSubview=!0)}.bind(this)).catch(function(e){this.set("noResults",!0),this.disableSubview=!0}.bind(this));return e.Promise.resolve(t)},buildContainer:function(){this.setContainerWithTemplate("search-sidebar-group-search",{noResults:this.get("noResults",!0),searchUrl:this.searchUrl.getURL()})},activate:function(){this.listContainerNode=this.get("container").one(".list-container"),this.get("noResults")||(this.get("groupsResults").forEach((e=>{let t=e.getValue("photos").filter((e=>!e.needsInterstitial&&parseInt(e.safetyLevel,10)<=this.safeSearchPref));e.setValue("photos",t),this.buildGroupLayout(e.toJSON())})),e.Snowplough&&this.registerEventHandler(this.listContainerNode.on("click",(function(){e.Snowplough.sendStructuredEvent({category:"searchSidebar",action:"relatedGroupsClick",label:""})}))))},buildGroupLayout:function(e){var t=this;this.appContext.getView("group-recs-rail-item-view",Object.assign({appContext:this.appContext,buddyicon:e.iconurls},e)).then((function(e){return e.initialize()})).then((function(e){return t.listContainerNode.appendChild(e.get("container")),e.activate()}))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-search-sidebar-group-search","hermes-template-result-cards","hermes-template-result-card","group-recs-rail-item-view","join-group-view","photo-size-helper"],langBundles:["common","search","groups"]});YUI.add("hermes-template-monthly-pro-offer-card",(function(t,e){var n=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,n,a,l){var s,i=null!=e?e:t.nullContext||{},o=t.hooks.helperMissing,r=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="monthly-pro-offer-rail-card">\n\t<div class="static-content-rail-content-container">\n\t\t<p class="logo">\n\t\t\t<svg class="icon icon-join_pro_crown"><use xlink:href="#icon-join_pro_crown"></use></svg>\n\t\t</p>\n\t\t<h2 class="title">\n\t\t\t'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||o).call(i,{name:"intlMessage",hash:{intlName:"checkout.MONTHLY_OFFER_PROMO_SEARCH_TITLE"},data:l,loc:{start:{line:7,column:3},end:{line:7,column:71}}}))+'\n\t\t</h2>\n\t\t<p class="description">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||o).call(i,{name:"intlMessage",hash:{intlName:"checkout.MONTHLY_OFFER_PROMO_SEARCH_DESC"},data:l,loc:{start:{line:9,column:25},end:{line:9,column:92}}}))+'</p>\n\t\t<p><a href="'+r("function"==typeof(s=null!=(s=c(n,"promoURL")||(null!=e?c(e,"promoURL"):e))?s:o)?s.call(i,{name:"promoURL",hash:{},data:l,loc:{start:{line:10,column:14},end:{line:10,column:26}}}):s)+'" class="upgrade" />'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||o).call(i,{name:"intlMessage",hash:{intlName:"checkout.MONTHLY_OFFER_PROMO_CTA"},data:l,loc:{start:{line:10,column:46},end:{line:10,column:105}}}))+'</a></p>\n\t</div>\n\t<div class="dummy-loader">\n\t\t<div class="box" style="height: 140px; width: 100%"></div>\n\t\t<div class="box" style="height: 14px; width: 100%"></div>\n\t\t<div class="box" style="height: 80px; width: 100%"></div>\n\t\t<div class="box" style="height: 14px; width: 80%"></div>\n\t</div>\n</div>\n'},useData:!0}),a={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(a[e]=n)})),t.Template.register("hermes/monthly-pro-offer-card",(function(e,l){return(l=l||{}).partials=l.partials?t.merge(a,l.partials):a,n(e,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("monthly-pro-offer-card-view",(function(e,o){require("hermes-core/flog")(o),new e.SubscriptionsHelper;e.namespace("Views")[this.name]=e.Base.create("monthly-pro-offer-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.promoURL=e.promoURL||"/account/upgrade/pro/pro-2-year?coupon=morefun20&utm_campaign=2-year-subs"},loadState:function(){return e.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("monthly-pro-offer-card",{promoURL:this.promoURL})},activate:function(){var o=this,r=this.get("container");return this.dummyLoaderNode=r.one(".dummy-loader"),this.blogContainerNode=r.one(".blog-rail-content-container"),this.currentContainerWidth=r.get("clientWidth"),e.Promise.resolve().then((function(){})).then((function(){o.dummyLoaderNode.addClass("hidden")}))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-monthly-pro-offer-card","subscriptions-helper"],optionalRequires:["hermes-core"],langBundles:["common","checkout"]});YUI.add("hermes-lang-checkout",(function(e,a){e.Intl.add("hermes/checkout","en-US",{APPLY_COUPON:[{type:0,value:"Apply"}],ADD_COUPON_CODE:[{type:0,value:"Add coupon code"}],REMOVE_COUPON:[{type:0,value:"Remove"}],COUPON_CODE_PLACEHOLDER:[{type:0,value:"Coupon code"}],COUPON_APPLIED:[{type:0,value:"Coupon code applied"}],COUPON_EXPIRED_SAD:[{type:0,value:"This code expired :("}],COUPON_NOT_VALID:[{type:0,value:"This code is not valid"}],PLEASE_WAIT:[{type:0,value:"Please wait"}],HELLO_PRO:[{type:0,value:"Hello, Pro!"}],GET_STARTED_WITH_SUPERPOWERS:[{type:0,value:"Get started with your superpowers"}],OK_THANKS:[{type:0,value:"Ok, thanks"}],TRANSACTION_FAILED:[{type:0,value:"Transaction failed"}],PROCESSING_PAYMENT:[{type:0,value:"Processing payment…"}],PAYMENT_ERROR_PROCESSING:[{type:0,value:"The payment could not be processed. Check your payment details or use another payment method and try again."}],SOMETHING_WENT_WRONG:[{type:0,value:"Something went wrong. Please check your billing address or payment method."}],RE_ENTER_PAYMENT_METHOD:[{type:0,value:"Re-enter payment method"}],SHARE_YOUR_NEW_ADFREE_PHOTOSTREAM:[{type:0,value:"Share your new ad-free photostream"}],COMPLETE_PURCHASE:[{type:0,value:"Complete purchase"}],INPUT_CREDIT_CARD_NUMBER:[{type:0,value:"Credit card number"}],INPUT_EXPIRATION_DATE:[{type:0,value:"Expiration date"}],INPUT_SECURITY_CODE:[{type:0,value:"Security code"}],INPUT_ZIP_CODE:[{type:0,value:"Zip code"}],INPUT_ZIP_POSTAL_CODE:[{type:0,value:"Zip/Postal code"}],PLEASE_ENTER_VALID_CARD_NUMBER:[{type:0,value:"Please enter a valid card number"}],PLEASE_ENTER_VALID_ADDRESS:[{type:0,value:"Please enter a valid address"}],PLEASE_SELECT_YEAR:[{type:0,value:"Please select a year"}],PLEASE_SELECT_MONTH:[{type:0,value:"Please select a month"}],PLEASE_SELECT_VALID_YEAR:[{type:0,value:"Please select a valid year"}],PLEASE_SELECT_VALID_MONTH:[{type:0,value:"Please select a valid month"}],PLEASE_ENTER_VALID_CVV:[{type:0,value:"Please select a valid security code"}],PLEASE_ENTER_CORRECT_VALID_CVV:[{type:0,value:"Please enter a valid security code"}],PLEASE_ENTER_VALID_ZIPCODE:[{type:0,value:"Please select a valid zip code"}],PLEASE_ENTER_CORRECT_VALID_ZIPCODE:[{type:0,value:"Please enter a valid zip code"}],PLEASE_SELECT_A_COUNTRY:[{type:0,value:"Please select a country"}],PLEASE_SELECT_A_STATE:[{type:0,value:"Please select a state"}],PLEASE_ENTER_CORRECT_VALID_ZIPPOSTALCODE:[{type:0,value:"Please enter a valid zip or postal code"}],PLAN_DETAIL_AD_FREE:[{type:0,value:"Ad-Free"}],PLAN_DETAIL_AUTO_UPLOADER:[{type:0,value:"Auto-uploader"}],PLAN_DETAIL_ADVANCED_STATISTICS:[{type:0,value:"Advanced statistics"}],PLAN_ORIGINAL_PRICE:[{type:0,value:"Original Price"}],PLAN_DETAIL_EXCLUSIVE_DISCOUNTS:[{type:0,value:"Exclusive discounts from Adobe, Blurb, Portfoliobox and Priime"}],FLICKR_ANNUAL_PRO_PLAN:[{type:0,value:"Annual Plan"}],FLICKR_MONTHLY_PRO_PLAN:[{type:0,value:"Monthly Plan"}],FLICKR_3_MONTHS_PRO_PLAN:[{type:0,value:"3 Months Plan"}],FLICKR_2_YEAR_PRO_PLAN:[{type:0,value:"2 Year Plan"}],CLICK_PAYPAL_LINK:[{type:0,value:"Click the button below to log in to Paypal and complete your purchase."}],BUY_FLICKR_PRO:[{type:0,value:"Buy Flickr Pro"}],GET_AUTO_UPLOADR:[{type:0,value:"Get Auto-Uploadr"}],BROWSE_AD_FREE:[{type:0,value:"Browse Ad-Free"}],VIEW_PARTNER_PERKS:[{type:0,value:"View partners perks"}],"45_DAYS_TRIAL":[{type:0,value:"45-day free trial"}],X_DAYS_TRIAL:[{type:1,value:"days"},{type:0,value:"-day free trial"}],BILLING_WILL_START_DATE:[{type:0,value:"Billing starts "},{type:1,value:"date"}],REDIRECTING_YOU_TO_PARTNER_DR:[{type:0,value:"Redirecting you to our partner Digital River"}],REDIRECTING_TO_PARTNER_DR:[{type:0,value:"Redirecting to our partner Digital River"}],PLEASE_CONTACT_SUPPORT_PAYPAL:[{type:0,value:'Please <a href="'},{type:1,value:"url"},{type:0,value:'" target="_blank">contact us</a> to update your PayPal payment method'}],PLEASE_CONTACT_SUPPORT_PAYMENT_METHOD:[{type:0,value:'Please <a href="'},{type:1,value:"url"},{type:0,value:'" target="_blank">contact us</a> to update your payment method'}],PAYMENT_METHOD_TITLE:[{type:0,value:"Payment method"}],BILLING_ADDRESS:[{type:0,value:"Billing address"}],AGREE_TO_TERMS:[{type:0,value:'<strong>Subscription automatically renews. Cancel anytime to stop future charges. Purchase is non-refundable.</strong> By clicking Complete Purchase you agree to Flickr’s <a href="'},{type:1,value:"urlPolicy"},{type:0,value:'" target="_blank">privacy policy</a> and <a href="'},{type:1,value:"urlTerms"},{type:0,value:'" target="_blank">terms and conditions of use</a>.'}],BILLING_ADDRESS_NAME:[{type:0,value:"Name"}],INPUT_POSTAL_CODE:[{type:0,value:"Postal code"}],INPUT_COUNTRY:[{type:0,value:"Country"}],INPUT_STATE:[{type:0,value:"State"}],INPUT_PROVINCE:[{type:0,value:"Province"}],INPUT_STREET:[{type:0,value:"Street address"}],INPUT_STREET_TWO:[{type:0,value:"Street Address 2"}],INPUT_CITY:[{type:0,value:"City"}],VERIFY_ADDRESS:[{type:0,value:"Verify address"}],PLEASE_CHOOSE_VERIFIED_ADDRESS:[{type:0,value:"Please choose which address you would like to use."}],EDIT_ADDRESS:[{type:0,value:"Edit address"}],ENTERED_ADDRESS:[{type:0,value:"Entered address"}],SUGGESTED_ADDRESS:[{type:0,value:"Suggested address"}],PRO_PERKS_PLAN:[{type:0,value:"Perks from SmugMug, Adobe, Peak Design, and many more"}],TAX_AMOUNT:[{type:0,value:"Tax:"}],TOTAL_AMOUNT:[{type:0,value:"Total:"}],PAGE_HAS_ERROR:[{type:0,value:"This page has encountered an error. Please confirm your information is correct and try again. If the problem persists, please contact our support team"}],YOU_WILL_CHANGE_CHARGED_RENEWAL_NO_TAX:[{type:0,value:"Your plan will automatically change to a "},{type:1,value:"plan"},{type:0,value:" on <strong>"},{type:3,value:"date",style:"long"},{type:0,value:"</strong> and you’ll be charged <strong>"},{type:1,value:"totalPrice"},{type:0,value:"</strong>."}],YOU_WILL_CHANGE_CHARGED_RENEWAL_INCL_TAX:[{type:0,value:"Your plan will automatically change to a "},{type:1,value:"plan"},{type:0,value:" on <strong>"},{type:3,value:"date",style:"long"},{type:0,value:"</strong> and you’ll be charged <strong>"},{type:1,value:"totalPrice"},{type:0,value:"</strong>, including "},{type:1,value:"taxAmount"},{type:0,value:" in tax."}],YOU_WILL_RENEW_CHARGED_RENEWAL_NO_TAX:[{type:0,value:"Your plan will automatically renew on <strong>"},{type:3,value:"date",style:"long"},{type:0,value:"</strong> and you’ll be charged <strong>"},{type:1,value:"totalPrice"},{type:0,value:"</strong>."}],YOU_WILL_RENEW_CHARGED_RENEWAL_NO_TAX_DISCOUNT:[{type:0,value:"Your plan will automatically renew on <strong>"},{type:3,value:"date",style:"long"},{type:0,value:'</strong> and you’ll be charged <span class="strike">'},{type:1,value:"priceBeforeDiscount"},{type:0,value:'</span> <span class="discounted">'},{type:1,value:"totalPrice"},{type:0,value:"</span>."}],YOU_WILL_RENEW_CHARGED_RENEWAL_INCL_TAX:[{type:0,value:"Your plan will automatically renew on <strong>"},{type:3,value:"date",style:"long"},{type:0,value:"</strong> and you’ll be charged <strong>"},{type:1,value:"totalPrice"},{type:0,value:"</strong>, including "},{type:1,value:"taxAmount"},{type:0,value:" in tax."}],UPDATE_PAYMENT_METHOD_BTN:[{type:0,value:"Update payment method"}],PROCESSING_ERROR:[{type:0,value:"Processing error."}],YOUR_CARD_IS_EXPIRED:[{type:0,value:"Your card is expired."}],YOUR_CARD_WAS_DECLINED:[{type:0,value:"Your card was declined."}],SUBTOTAL_AMOUNT:[{type:0,value:"Subtotal"}],TAXES_AMOUNT:[{type:0,value:"Taxes"}],OKAY_GOT_IT:[{type:0,value:"Okay, got it"}],UPDATED_PAYMENT:[{type:0,value:"Updated payment"}],APPLE_PAYMENT_NOT_COMPLETE:[{type:0,value:"Your Apple Payment was not complete. We’ve updated the price based on your billing address, please try your payment again"}],SHOW_APPRECIATION_GIFT:[{type:0,value:"Show your appreciation with the gift of Flickr Pro"}],PAY_WITH_CARD:[{type:0,value:"Pay with card"}],PAYMENT_OPTIONS:[{type:0,value:"Payment options"}],OR_PAY_WITH_CARD:[{type:0,value:"or pay with card"}],PAYMENT_NOT_COMPLETE:[{type:0,value:"Your payment was not complete. We’ve updated the price based on your billing address, please try your payment again."}],LEGAL_TERMS_GIFT:[{type:0,value:'<strong>Purchase is non-refundable.</strong> By clicking Complete Purchase you agree to Flickr’s <a href="'},{type:1,value:"urlPolicy"},{type:0,value:'" target="_blank">privacy policy</a> and <a href="'},{type:1,value:"urlTerms"},{type:0,value:'" target="_blank">terms and conditions of use</a>.'}],ADD_LINE_2:[{type:0,value:"Add Street address line 2"}],LINE_2_OPTIONAL:[{type:0,value:"Line 2 (optional)"}],FREE_TRIAL_UNTIL_DATE_WITH_PRICE:[{type:0,value:"You’ll have Flickr Pro for free until <strong>"},{type:3,value:"date",style:"long"},{type:0,value:"</strong>. Once your free trial is over, you’ll be charged <strong>"},{type:1,value:"totalPrice"},{type:0,value:"</strong> for a "},{type:1,value:"plan"},{type:0,value:"."}],MONTHLY_OFFER_PROMO_TITLE:[{type:0,value:"Ready for more photo fun?"}],MONTHLY_OFFER_PROMO_DESC:[{type:0,value:"Extend your stay with a 2-year Flickr Pro subscription and enjoy an exclusive 20% off."}],MONTHLY_OFFER_PROMO_CTA:[{type:0,value:"Upgrade now and save big!"}],MONTHLY_OFFER_PROMO_SEARCH_TITLE:[{type:0,value:"More photo fun awaits!"}],MONTHLY_OFFER_PROMO_SEARCH_DESC:[{type:0,value:"Stay longer and save 20% on a 2-year Flickr Pro subscription now."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-slim-footer",(function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<a href="/help/forum" data-track="footer-forum">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:t,loc:{start:{line:9,column:93},end:{line:9,column:137}}}))+"</a>"},3:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'\t\t<a  class="trustarc-cookie-pref-link" href="/help/cookies">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"policy-terms.COOKIES"},data:t,loc:{start:{line:13,column:61},end:{line:13,column:108}}}))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,a,n,l,t){var s,o=null!=a?a:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,m=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="slim-footer">\n\t<a href="/about" data-track="footer-about">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:t,loc:{start:{line:2,column:44},end:{line:2,column:83}}}))+'</a>\n\t<a href="/jobs" data-track="footer-jobs">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.JOBS"},data:t,loc:{start:{line:3,column:42},end:{line:3,column:80}}}))+'</a>\n\t<a target="_blank" href="//blog.flickr.net/en" data-track="footer-blog">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.BLOG"},data:t,loc:{start:{line:4,column:73},end:{line:4,column:111}}}))+'</a>\n\t<a target="_blank" href="https://www.flickrads.com?utm_source=flickr&utm_campaign=footer">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ADVERTISE"},data:t,loc:{start:{line:5,column:91},end:{line:5,column:134}}}))+'</a>\n\t<a href="/services/developer" data-track="footer-developers">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:t,loc:{start:{line:6,column:62},end:{line:6,column:106}}}))+'</a>\n\t<a href="/help/guidelines" data-track="footer-guidelines">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:t,loc:{start:{line:7,column:59},end:{line:7,column:103}}}))+'</a>\n\t<a target="_blank" href="//flickrhelp.com" data-track="footer-help">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:t,loc:{start:{line:8,column:69},end:{line:8,column:107}}}))+"</a>\n\t"+(null!=(s=(m(n,"isNotFlipped")||a&&m(a,"isNotFlipped")||i).call(o,"enable_forum_deprecation",{name:"isNotFlipped",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:9,column:1},end:{line:9,column:158}}}))?s:"")+'\n\t<a href="/help/privacy" data-track="footer-privacy">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:t,loc:{start:{line:10,column:53},end:{line:10,column:94}}}))+'</a>\n\t<a href="/help/terms" data-track="footer-terms">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:t,loc:{start:{line:11,column:49},end:{line:11,column:88}}}))+"</a>\n"+(null!=(s=(m(n,"isFlipped")||a&&m(a,"isFlipped")||i).call(o,"enable-cookie-consent-execution-hermes",{name:"isFlipped",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t,loc:{start:{line:12,column:1},end:{line:14,column:15}}}))?s:"")+'\t<div class="foot-li lang-switcher">\n\t\t<a href="/change_language.gne?lang='+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"code"):s,a))+"&csrf="+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"csrf"):s,a))+'" data-track="footer-language">'+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"name"):s,a))+'</a>\n\t\t<div class="arrow">\n\t\t\t<svg class="icon icon-caret-down"><use xlink:href="#icon-caret-down"></use></svg>\n\t\t</div>\n\t </div>\n</div>\n\n'},useData:!0}),l={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)})),e.Template.register("hermes/slim-footer",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,n(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("slim-footer-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.footerHelper=new e.FooterHelper(this.appContext,{}),this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t=this.footerHelper.getTemplateParams(),YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),this.setContainerWithTemplate("slim-footer",t),this},activate:function(){var e,t=this,r=this.get("container");return this.registerEventHandler(r.delegate("click",(function(r){e=r.target.ancestor(".lang-switcher",!0),r.preventDefault(),t.footerHelper.createDropAround(e,t)}),".lang-switcher")),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-slim-footer","url-helper","footer-helper"],langBundles:["common","policy-terms"]});YUI.add("search-sidebar-view",(function(e,i){var r=require("hermes-core/flog")(i);const t=new e.SubscriptionsHelper;e.namespace("Views")[this.name]=e.Base.create("search-sidebar-view",e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"search-sidebar-related-tags-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"search-sidebar-group-search-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"search-sidebar-photos-search-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"search-photos-everyone-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"slim-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},initializer:function(e){this.params=e,this.nsid=this.appContext.getViewer().nsid,this.showMonthlyOffer=!1,this.prevScrollTop=0,this.scrollDir=-1,this.railSpacerMargin=0,this.railItems=[],this.railCardViews={},this.isPhotosSearch=e.isPhotosSearch||!1,this.isPeopleSearch=e.isPeopleSearch||!1,this.isGroupSearch=e.isGroupSearch||!1,this.railCardOrderKeys=["related-tags","monthlyProOffer","photos-search","group-search","ad"]},loadState:function(){return this.isPeopleSearch?this.railItems=["related-tags","ad"]:this.isGroupSearch?this.railItems=["related-tags","photos-search","ad"]:this.railItems=["related-tags","group-search","ad"],this.appContext.flipper.isFlipped("enable-monthly-2ypro-offer")&&this.appContext.getViewer().signedIn?this.appContext.getModel("effective-subscriptions-models",this.nsid).then(function(e){if(e&&e.getValue("length")>0){var i=t.getEligibleSubscription(e,!0);!i||i.isGoogleOrAppleSubscription||i.futureChanges&&i.futureChanges.hasDiscount&&i.futureChanges.type===t.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID||(this.showMonthlyOffer=t.isAMonthlySub(i.type))}}.bind(this)):e.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("search-sidebar")},activate:function(){var i=this,r=this.get("container");return this.railItemsContainerNode=r.one(".rail-items-container"),this.railContentContainer=r.one(".sidebar-content-container"),this.dummyLoaderNode=r.one(".dummy-loader"),this.appContext.flipper.isFlipped("enable-search-sidebar")&&(this.scrollContainer=e.one("html"),this.sidebarColumnNode=e.one(".sidebar-column"),this.sidebarColumnSpacer=e.one(".sidebar-column-spacer"),this.sidebarColumnContentNode=e.one(".sidebar-content-container"),this.registerEventHandler(e.globalEvents.subscribe("window:scroll:nothrottle",this.handleScrollUnthrottled.bind(this)))),i.getSubviews().then((function(){return i.toggleLoading(!1),i.insertSubviews()}))},getSubviews:function(){var i=this,r=[],t={};return i.railItems.includes("related-tags")&&(t={searchTerm:this.params.searchTerm},r.push(this.appContext.getView("search-sidebar-related-tags-view",t).then((function(e){return i.railCardViews["related-tags"]=e,e})).catch((function(e){return e})))),this.showMonthlyOffer&&(t={searchTerm:this.params.searchTerm,promoURL:"/account/upgrade/pro/pro-2-year?coupon=morefun20&utm_campaign=2-year-subs&utm_source=Flickr&utm_medium=house_ads&utm_content=sidebarsearch"},r.push(this.appContext.getView("monthly-pro-offer-card-view",t).then((function(e){return i.railCardViews.monthlyProOffer=e,e})).catch((function(e){return e})))),i.railItems.includes("group-search")&&(t={searchTerm:this.params.searchTerm},r.push(this.appContext.getView("search-sidebar-group-search-view",t).then((function(e){return i.railCardViews["group-search"]=e,e})).catch((function(e){return e})))),i.railItems.includes("photos-search")&&(t={searchTerm:this.params.searchTerm},r.push(this.appContext.getView("search-sidebar-photos-search-view",t).then((function(e){return i.railCardViews["photos-search"]=e,e})).catch((function(e){return e})))),this.appContext.getViewer().isPro||r.push(this.appContext.getView("sidebar-moola-view",{}).then((function(e){return i.railCardViews.ad=e,e})).catch((function(e){return e}))),e.Promise.all(r)},insertSubviews:function(){var i=this,t=[],s=[];return this.railCardOrderKeys.forEach((function(e){var r=i.railCardViews[e];if(r){var a={cardView:r,theme:"ad"===e?"flat":void 0};s.push(a),t.push(r.initialize().catch((function(e){return s.splice(s.indexOf(a),1),e})))}})),e.Promise.all(t).then((function(){var t=[];return s.forEach((function(s){var a=e.Node.create('<div class="rail-item"></div>');s.theme&&a.addClass(s.theme),s.cardView.disableSubview||(a.append(s.cardView.get("container")),i.railItemsContainerNode.append(a),t.push(new e.Promise((function(e,i){return s.cardView.activate()})).catch((function(e){r.error("Error inserting rail card",{err:e}),s.cardView.destroy({remove:!0}),a.remove()}))))})),e.Promise.all(t)}))},toggleLoading:function(e){this.railContentContainer.toggleClass("invisible",e),this.dummyLoaderNode.toggleClass("hidden",!e)},handleScrollUnthrottled:function(){var i,r=this.scrollContainer.get("scrollTop"),t=this.appContext.viewportData.getHeight(),s=e.AnchorRepositioner.getTotalOffset(),a=s+(this.isPhotosSearch?100:60);if(this.prevScrollTop>r){if(1===this.scrollDir){if(i=this.sidebarColumnNode.get("offsetTop"),this.railHeight=this.sidebarColumnContentNode.get("clientHeight"),this.railHeight<t-a)return this.sidebarColumnContentNode.setStyle("top",a),this.railSpacerMargin=0,void this.sidebarColumnSpacer.setStyle("margin-top",this.railSpacerMargin);r+t-s-i>this.railHeight+this.railSpacerMargin&&(this.railSpacerMargin=Math.max(0,r+t-this.railHeight-i),this.sidebarColumnSpacer.setStyle("margin-top",this.railSpacerMargin)),this.scrollDir=-1,this.sidebarColumnContentNode.setStyle("bottom",t-this.railHeight-a),this.sidebarColumnContentNode.setStyle("top","initial")}}else if(this.prevScrollTop<r&&-1===this.scrollDir){if(i=this.sidebarColumnNode.get("offsetTop"),this.railHeight=this.sidebarColumnContentNode.get("clientHeight"),this.railHeight<t-a)return this.sidebarColumnContentNode.setStyle("top",a),this.railSpacerMargin=0,void this.sidebarColumnSpacer.setStyle("margin-top",this.railSpacerMargin);r-i+a<this.railSpacerMargin&&(this.railSpacerMargin=Math.max(0,r-i+a),this.sidebarColumnSpacer.setStyle("margin-top",this.railSpacerMargin)),this.scrollDir=1,this.sidebarColumnContentNode.setStyle("bottom","initial"),this.sidebarColumnContentNode.setStyle("top",t-this.railHeight)}this.prevScrollTop=r}})}),"@VERSION@",{requires:["flickr-view","sidebar-moola-view","hermes-template-search-sidebar","search-sidebar-related-tags-view","search-photos-everyone-view","search-sidebar-photos-search-view","search-sidebar-group-search-view","monthly-pro-offer-card-view","subscriptions-helper","slim-footer-view"],langBundles:["common"]});YUI.add("hermes-template-cta-dialog",(function(e,t){var l=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,l,n,a){var r,o=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,s=e.escapeExpression,c="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cta-dialog">\n\t'+s((u(l,"outlet")||t&&u(t,"outlet")||i).call(o,null!=t?u(t,"basic-closeable-header-view"):t,{name:"outlet",hash:{},data:a,loc:{start:{line:2,column:1},end:{line:2,column:39}}}))+'\n\n\t<div class="content-container">\n\t\t<h3 class="dialog-title">'+s(typeof(r=null!=(r=u(l,"title")||(null!=t?u(t,"title"):t))?r:i)===c?r.call(o,{name:"title",hash:{},data:a,loc:{start:{line:5,column:27},end:{line:5,column:36}}}):r)+'</h3>\n\t\t<p class="dialog-message">'+s((u(l,"renderTrustedMarkup")||t&&u(t,"renderTrustedMarkup")||i).call(o,null!=t?u(t,"htmlMessage"):t,{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:6,column:28},end:{line:6,column:63}}}))+'</p>\n\t\t<button class="large action confirm">'+s(typeof(r=null!=(r=u(l,"confirmButtonText")||(null!=t?u(t,"confirmButtonText"):t))?r:i)===c?r.call(o,{name:"confirmButtonText",hash:{},data:a,loc:{start:{line:7,column:39},end:{line:7,column:60}}}):r)+"</button>\n\t</div>\n</div>\n"},useData:!0}),n={};e.Array.each([],(function(t){var l=e.Template.get("hermes/"+t);l&&(n[t]=l)})),e.Template.register("hermes/cta-dialog",(function(t,a){return(a=a||{}).partials=a.partials?e.merge(n,a.partials):n,l(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});